@startuml

class BPMN {
  string defintion
}

class BPMNFeature {
  string name
  Scenario[] scenarios
}

interface Scenario {
  string name
}

class ExclusiveGatewayScenario {
  object state
  string gateway
  string expectedFlow
}

class ParallelGatewayScenario {
  object state
  string gateway
  string[] expectedFlows
}

class DMNScenario {  
  object state
  string dmn
  object expectedResult
}

class BPMNTestFactory
{
  BPMNTest Create(BPMNFeature feature)
}

class BPMNTest
{
  TestResult[] Execute()
}

interface TestResult
{
  string description  
}

interface TestScenario {
  TestResult Execute()
}

interface ExpressionParser {
    object Parse(object state, string expression)
}


BPMN <-- BPMNFeature : references
BPMNFeature "1" *-- "many" Scenario : contains

Scenario <|.. ExclusiveGatewayScenario
Scenario <|.. ParallelGatewayScenario
Scenario <|.. DMNScenario

BPMNFeature -> BPMNTestFactory : based on
BPMNTestFactory --> BPMNTest : create
BPMNTest "1" *- "many" TestResult : "                             "
TestResult <|.. PassTestResult
TestResult <|.. FailTestResult

BPMNTest o-- "many" TestScenario : composite

TestScenario <|.. ExclusiveGatewayTest
TestScenario <|.. ParallelGatewayTest
TestScenario <|.. DMNTest

ExclusiveGatewayTest --> ExpressionParser : uses
ParallelGatewayTest --> ExpressionParser : uses
DMNTest --> ExpressionParser : uses

ExpressionParser <|.. FeelScalaExpressionParser
ExpressionParser <|.. SpelExpressionParser

@enduml
